# Default values for jaeger.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

jaeger:
  storage:
    type: cassandra

# Parameters from cassandraSchemaJob will be inside inside the ConfigMap for the collector
cassandraSchemaJob:
  host: cassandra.cassandra.svc
  keyspace: jaeger
  password: admin
  username: admin
  datacenter: dc1

  # This parameter responsible for with either with SimpleStrategy (without replication)
  # or with NetworkReplicationStrategy (with replication):
  # * prod - will use NetworkReplicationStrategy
  # * test - will use SimpleStrategy
  mode: prod

collector:
  install: true

  # Part of parameters that doesn't existed in cassandraSchemaJob
  config:
    service:
      telemetry:
        logs:
          level: debug
    processors:
      memory_limiter:
        # Enable memory limiter to prevent OOM issues
        enabled: false
        check_interval: 1s
        # Hard memory limit in MiB. When exceeded, garbage collection is triggered
        # Should be set to approximately 75-80% of pod memory limit
        # Default collector memory limit is 200Mi, so default is 150Mi (75% of 200Mi)
        limit_mib: 150
        # Allowed memory spike in MiB. Soft limit = limit_mib - spike_limit_mib
        # When soft limit is exceeded, processor starts rejecting incoming data
        # Should be set to approximately 15-20% of pod memory limit
        # Default collector memory limit is 200Mi, so default is 30Mi (15% of 200Mi)
        spike_limit_mib: 30
    exporters:
      jaeger_storage_exporter:
        # Retry configuration to save data in database
        retry_on_failure:
          enabled: true
          initial_interval: 10s
          max_interval: 1m
          max_elapsed_time: 5m
        # Queue and batch configuration
        queue:
          enabled: true
          num_consumers: 100
          queue_size: 1000
